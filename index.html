<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>imjd的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="技术博客">
<meta property="og:type" content="website">
<meta property="og:title" content="imjd的博客">
<meta property="og:url" content="https://chenjindiao.github.io/index.html">
<meta property="og:site_name" content="imjd的博客">
<meta property="og:description" content="技术博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="imjd的博客">
<meta name="twitter:description" content="技术博客">
  
    <link rel="alternate" href="/atom.xml" title="imjd的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">imjd的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">技术博客</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://chenjindiao.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-strings多语言翻译脚本" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/04/01/strings多语言翻译脚本/" class="article-date">
  <time datetime="2018-04-01T15:56:39.000Z" itemprop="datePublished">2018-04-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/04/01/strings多语言翻译脚本/">Android strings.xml多语言翻译脚本</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在开发应用时需要用到多语言，而strings资源比较多，查漏补缺检查起来也很麻烦，需要有个工具能够快速翻译港澳繁体、台湾繁体、英文等。</p>
<p>因此用python写了个脚本。</p>
<h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><ol>
<li><p>编写正则匹配</p>
</li>
<li><p>读取源strings.xml文件</p>
</li>
<li><p>按行正则解析，请求网络转换内容</p>
</li>
<li><p>将转换后的内容写进新xml</p>
</li>
<li><p>完成转换</p>
</li>
</ol>
<h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><ol>
<li>添加参数，指定要转换的语言</li>
<li>对比查找目标文件缺失的string</li>
</ol>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><ul>
<li>需要用到<strong>正则</strong>、<strong>文件读写</strong>、<strong>json解析</strong>、<strong>urllib网络请求</strong> </li>
<li>目前只实现了简体到港澳繁体、台湾繁体的转换。如果需要翻译英文，可以使用有道的API来实现，参考代码中的trans_content方法添加即可。</li>
<li>以下为实现代码，已放在<a href="https://github.com/chenjindiao/PythonTools" target="_blank" rel="noopener">github</a>上</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">StringsTranslate.py</span></span><br><span class="line"><span class="string">该脚本用于将Android strings.xml自动翻译为目标语言，输出新的xml文件</span></span><br><span class="line"><span class="string">仅作交流学习之用，</span></span><br><span class="line"><span class="string">使用了https://tool.lu/zhconvert这个网站进行繁体翻译</span></span><br><span class="line"><span class="string">@autor: chenjindiao</span></span><br><span class="line"><span class="string">@date: 2018-03-30</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 从每行string中，解析出值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_content</span><span class="params">(line)</span>:</span></span><br><span class="line">    <span class="comment"># line = '  &lt;string name="app_name"&gt;contnet&lt;/string&gt;  '</span></span><br><span class="line">    match_obj = re.match(<span class="string">r'.*?&lt;string name="(.*?)"&gt;(.*?)&lt;/string&gt;.*?'</span>, line, )</span><br><span class="line">    <span class="keyword">if</span> match_obj:</span><br><span class="line">        <span class="comment"># print 'find_content: ' + match_obj.group(2)</span></span><br><span class="line">        <span class="keyword">return</span> match_obj.group(<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 翻译，将内容转换为需要的语言，默认翻译为港澳繁体</span></span><br><span class="line"><span class="comment"># 这里使用https://tool.lu/zhconvert这个网站进行翻译</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">trans_content</span><span class="params">(content, locale=<span class="string">"zh-hk"</span>)</span>:</span></span><br><span class="line">    url = <span class="string">"https://tool.lu/zhconvert/ajax.html"</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_2) AppleWebKit/537.36"</span>,</span><br><span class="line">        <span class="string">"Content-Type"</span>: <span class="string">"application/x-www-form-urlencoded; charset=UTF-8"</span></span><br><span class="line">    &#125;</span><br><span class="line">    form_data = &#123;</span><br><span class="line">        <span class="string">"code"</span>: content,</span><br><span class="line">        <span class="string">"operate"</span>: locale</span><br><span class="line">    &#125;</span><br><span class="line">    request = urllib2.Request(url, data=urllib.urlencode(form_data), headers=headers)</span><br><span class="line">    response = <span class="keyword">None</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = urllib2.urlopen(request).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.HTTPError, e:</span><br><span class="line">        <span class="keyword">print</span> e.msg</span><br><span class="line">        <span class="comment"># urllib2.HTTPError: HTTP Error 429: Too Many Requests</span></span><br><span class="line">        <span class="keyword">if</span> e.code == <span class="number">429</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">'sleep 15...'</span></span><br><span class="line">            time.sleep(<span class="number">15</span>)</span><br><span class="line">            response = urllib2.urlopen(request).read()</span><br><span class="line">    <span class="comment"># print response</span></span><br><span class="line">    <span class="keyword">if</span> response:</span><br><span class="line">        data = json.loads(response)</span><br><span class="line">        <span class="keyword">return</span> data[<span class="string">'text'</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取文件按行翻译，不需要翻译的行就按原内容输出到新文件</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">trans_file</span><span class="params">(path, locale)</span>:</span></span><br><span class="line">    new_path = path + <span class="string">"_"</span> + locale + <span class="string">".xml"</span></span><br><span class="line">    xf = open(path)</span><br><span class="line">    out = open(new_path, <span class="string">"w"</span>)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> xf:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">'line: '</span> + line</span><br><span class="line">        value = find_content(line)</span><br><span class="line">        <span class="keyword">if</span> value:</span><br><span class="line">            <span class="comment"># print 'old value: ' + value</span></span><br><span class="line">            new_value = trans_content(value, locale)</span><br><span class="line">            <span class="comment"># print 'new_value: ' + new_value</span></span><br><span class="line">            new_line = line.replace(value, new_value)</span><br><span class="line">            <span class="keyword">print</span> <span class="string">'new_line: '</span> + new_line</span><br><span class="line">            out.write(new_line)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            out.write(line)</span><br><span class="line">    xf.close()</span><br><span class="line">    out.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 解决文件编码报错问题</span></span><br><span class="line">    reload(sys)</span><br><span class="line">    sys.setdefaultencoding(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 命令使用</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'Use command line: python StringsTranslate.py sourcePath targetLocale'</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'targetLocale: zh-tw  zh-hk'</span></span><br><span class="line"></span><br><span class="line">    path = sys.argv[<span class="number">1</span>]</span><br><span class="line">    locale = sys.argv[<span class="number">2</span>]</span><br><span class="line">    <span class="comment"># print path + ' ' + locale</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'begin trans file: '</span> + path</span><br><span class="line">    <span class="keyword">print</span> trans_file(path, locale)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'finish!'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<ul>
<li>目前使用了网络请求转换繁体，还有看到一些python库可以用，如<a href="https://pypi.python.org/pypi/opencc-python/" target="_blank" rel="noopener">opencc-python</a> 、<a href="https://github.com/skydark/nstools/tree/master/zhtools" target="_blank" rel="noopener">zhtools</a> 但好像只是简单的单字转换，目前没有实际测试过。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chenjindiao.github.io/2018/04/01/strings多语言翻译脚本/" data-id="cjfh2pf6v0005ryqsz9095f8h" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-github-io搭建个人博客" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/06/github-io搭建个人博客/" class="article-date">
  <time datetime="2018-03-05T16:30:05.000Z" itemprop="datePublished">2018-03-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/06/github-io搭建个人博客/">github.io搭建个人博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://chenjindiao.github.io/2018/03/06/github-io搭建个人博客/" data-id="cjfh2pf6c0000ryqsjzdd6sao" class="article-share-link">Teilen</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hexo备份源文件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/06/hexo备份源文件/" class="article-date">
  <time datetime="2018-03-05T16:15:03.000Z" itemprop="datePublished">2018-03-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/06/hexo备份源文件/">hexo备份源文件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><ul>
<li>hexo deploy发布默认只有public文件夹，即生成的html网页文件，并不包括md源文件。</li>
<li>这样就需要自己保存好源文件，并且还要保存主题等文件，避免文件丢失和可以随时发布。</li>
</ul>
<h2 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h2><ul>
<li>使用<a href="https://github.com/hexojs/hexo-deployer-git" target="_blank" rel="noopener">hexo-deployer-git</a>插件，发布同时同步源文件到GitHub。</li>
<li>在github.io上创建分支src，将源文件一同上传。</li>
<li>本人使用了如下配置</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># _config.yaml</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  - type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">    repo:</span> <span class="string">git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git</span></span><br><span class="line"><span class="attr">    branch:</span> <span class="string">master</span></span><br><span class="line"><span class="attr">  - type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">    repo:</span> <span class="string">git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git</span></span><br><span class="line"><span class="attr">    branch:</span> <span class="string">src</span></span><br><span class="line"><span class="attr">    extend_dirs:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">    ignore_hidden:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    ignore_pattern:</span></span><br><span class="line"><span class="attr">        public:</span> <span class="string">.</span></span><br></pre></td></tr></table></figure>
<h2 id="hexo-deployer-git官方文档"><a href="#hexo-deployer-git官方文档" class="headerlink" title="hexo-deployer-git官方文档"></a>hexo-deployer-git官方文档</h2><h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>If you want to use the latest features of hexo-deployer-git, you may install it from github:</p>
<ul>
<li><p>for npm version under 4</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install git+git@github.com:hexojs/hexo-deployer-git.git --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>for npm version 5</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install git+ssh://git@github.com:hexojs/hexo-deployer-git.git --save</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h3><p>You can configure this plugin in <code>_config.yml</code>.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># You can use this:</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">&lt;repository</span> <span class="string">url&gt;</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">[branch]</span></span><br><span class="line"><span class="attr">  message:</span> <span class="string">[message]</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">[git</span> <span class="string">user]</span></span><br><span class="line"><span class="attr">  email:</span> <span class="string">[git</span> <span class="string">email]</span></span><br><span class="line"><span class="attr">  extend_dirs:</span> <span class="string">[extend</span> <span class="string">directory]</span></span><br><span class="line"><span class="attr">  ignore_hidden:</span> <span class="literal">false</span> <span class="comment"># default is true</span></span><br><span class="line"><span class="attr">  ignore_pattern:</span> <span class="string">regexp</span>  <span class="comment"># whatever file that matches the regexp will be ignored when deploying</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># or this:</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  message:</span> <span class="string">[message]</span></span><br><span class="line"><span class="attr">  repo:</span></span><br><span class="line"><span class="attr">    github:</span> <span class="string">&lt;repository</span> <span class="string">url&gt;,[branch]</span></span><br><span class="line"><span class="attr">    coding:</span> <span class="string">&lt;repository</span> <span class="string">url&gt;,[branch]</span></span><br><span class="line"><span class="attr">  extend_dirs:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">[extend</span> <span class="string">directory]</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">[another</span> <span class="string">extend</span> <span class="string">directory]</span></span><br><span class="line"><span class="attr">  ignore_hidden:</span></span><br><span class="line"><span class="attr">    public:</span> <span class="literal">false</span></span><br><span class="line">    <span class="string">[extend</span> <span class="string">directory]:</span> <span class="literal">true</span></span><br><span class="line">    <span class="string">[another</span> <span class="string">extend</span> <span class="string">directory]:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  ignore_pattern:</span></span><br><span class="line">    <span class="string">[folder]:</span> <span class="string">regexp</span>  <span class="comment"># or you could specify the ignore_pattern under a certain directory</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>repo</strong>: Repository URL</li>
<li><strong>branch</strong>: Git branch to deploy the static site to</li>
<li><strong>message</strong>: Commit message. </li>
<li><strong>name</strong> and <strong>email</strong>: User info for committing the change, overrides global config. This info is independent of git login.</li>
<li><strong>extend_dirs</strong>: Add some extensions directory to publish. e.g <code>demo</code>, <code>examples</code></li>
<li><strong>ignore_hidden</strong> (Boolean|Object): whether ignore hidden files to publish. the github requires the <code>.nojekyll</code> in root.<ul>
<li>Boolean: for all dirs.</li>
<li>Object: for public dir and extend dir:<ul>
<li><code>public</code>: the public dir defaults.</li>
<li>[extend directory]</li>
</ul>
</li>
</ul>
</li>
<li><strong>ignore_pattern</strong> (Object|RegExp): Choose the ignore pattern when deploying<ul>
<li>RegExp: for all dirs.</li>
<li>Object: specify the ignore pattern under certain directory. For example, if you want to push the source files and generated files at the same time to two different branches. The option should be like<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># _config.yaml</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  - type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">    repo:</span> <span class="string">git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git</span></span><br><span class="line"><span class="attr">    branch:</span> <span class="string">master</span></span><br><span class="line"><span class="attr">  - type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">    repo:</span> <span class="string">git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git</span></span><br><span class="line"><span class="attr">    branch:</span> <span class="string">src</span></span><br><span class="line"><span class="attr">    extend_dirs:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">    ignore_hidden:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    ignore_pattern:</span></span><br><span class="line"><span class="attr">        public:</span> <span class="string">.</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works"></a>How it works</h3><p><code>hexo-deployer-git</code> works by generating the site in <code>.deploy_git</code> and <em>force pushing</em> to the repo(es) in config.<br>If <code>.deploy_git</code> does not exist, a repo will initialized (<code>git init</code>).<br>Otherwise the curent repo (with its commit history) will be used.</p>
<p>Users can clone the deployed repo to <code>.deploy_git</code> to keep the commit history.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone &lt;gh-pages repo&gt; .deploy_git</span><br></pre></td></tr></table></figure></p>
<h3 id="Reset"><a href="#Reset" class="headerlink" title="Reset"></a>Reset</h3><p>Remove <code>.deploy_git</code> folder.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rm -rf .deploy_git</span><br></pre></td></tr></table></figure>
<h3 id="License"><a href="#License" class="headerlink" title="License"></a>License</h3><p>MIT</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chenjindiao.github.io/2018/03/06/hexo备份源文件/" data-id="cjfh2pf6o0002ryqsoe14fdlh" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hexo环境搭建" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/06/hexo环境搭建/" class="article-date">
  <time datetime="2018-03-05T16:06:53.000Z" itemprop="datePublished">2018-03-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/06/hexo环境搭建/">hexo环境搭建</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>如果你没有接触了解hexo，当你看到这个页面时，可能会想这是怎么创建的呢？</p>
<p>首先你要知道这是GitHub+hexo，然后网上搜一下就有很多教程了。</p>
<h2 id="如何搭建"><a href="#如何搭建" class="headerlink" title="如何搭建"></a>如何搭建</h2><p>这里引用官方教程，参考<a href="https://hexo.io" target="_blank" rel="noopener">hexo</a>官网。简单来讲：</p>
<ol>
<li>安装node.js</li>
<li>安装git（如果需要使用git发布）</li>
<li>安装hexo</li>
<li>编写md文件并发布到github pages</li>
</ol>
<h4 id="Install-Node-js"><a href="#Install-Node-js" class="headerlink" title="Install Node.js"></a>Install Node.js</h4><p>使用<a href="https://github.com/creationix/nvm" target="_blank" rel="noopener">Node Version Manager</a>安装，先安装nvm</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.2/install.sh | bash</span><br></pre></td></tr></table></figure>
<p>然后重启终端，使用nvm安装Node.js</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nvm install stable</span><br></pre></td></tr></table></figure>
<h4 id="Install-Hexo"><a href="#Install-Hexo" class="headerlink" title="Install Hexo"></a>Install Hexo</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p>Once Hexo is installed, run the following commands to initialise Hexo in the target <code>&lt;folder&gt;</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chenjindiao.github.io/2018/03/06/hexo环境搭建/" data-id="cjfh2pf6t0004ryqsiturije7" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/03/05/hello-world/" class="article-date">
  <time datetime="2018-03-05T14:30:35.000Z" itemprop="datePublished">2018-03-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/05/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://chenjindiao.github.io/2018/03/05/hello-world/" data-id="cjfh2pf6k0001ryqs4ps7yeak" class="article-share-link">Teilen</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/hexo/" style="font-size: 20px;">hexo</a> <a href="/tags/python/" style="font-size: 10px;">python</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/04/01/strings多语言翻译脚本/">Android strings.xml多语言翻译脚本</a>
          </li>
        
          <li>
            <a href="/2018/03/06/github-io搭建个人博客/">github.io搭建个人博客</a>
          </li>
        
          <li>
            <a href="/2018/03/06/hexo备份源文件/">hexo备份源文件</a>
          </li>
        
          <li>
            <a href="/2018/03/06/hexo环境搭建/">hexo环境搭建</a>
          </li>
        
          <li>
            <a href="/2018/03/05/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 imjd<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>